<!DOCTYPE html>
<html lang="hi">
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ccapture.js/1.1.0/CCapture.all.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GK Quiz Generator</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Yatra+One&display=swap" rel="stylesheet">
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #c2a87d;
            font-family: 'Yatra One', cursive;
        }
        .option {
    background-color: green;
    color: white;
    padding: 10px;
    margin: 5px 0;
    border-radius: 5px;
    text-align: left;
    font-size: 18px;
    border: 1px solid black; /* ब्लैक बॉर्डर */
}
        .quiz-container {
            background:rgba(255, 255, 255, 0.3); /* हल्का Transparent */
            backdrop-filter:blur(8px); /* Blur Effect */
            padding: 20px;
            border-radius: 10px;
            box-shadow: none;
            text-align: center;
            width: 350px;
            position: relative;
            top:-80px;
        }
.option {
    font-size: 20px; /* टेक्स्ट बड़ा किया */
    font-weight: bold; /* टेक्स्ट बोल्ड किया */
}
        .quiz-header {
            font-weight: bold;
            font-size: 24px;
            border: 2px solid black;
            display: inline-block;
            padding: 5px 15px;
            margin-bottom: 20px;
            text-shadow: 2px 2px 5px #999;
        }
        .category {
            color: black;
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        #question-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            position: relative;
        }
#exam-year {
    font-family: 'Playfair Display', serif;
    font-size: 14px;
    color: red;
    font-weight: bold;
    margin-top: 5px;
    text-align: right;
    width: 100%;
}
        .option {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            background: green;
            color: white;
            padding: 10px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            position: relative;
        }
        .option span {
            background: black;
            color: white;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
        }
        .correct {
            animation: blink 1s infinite alternate;
            position: relative;
        }
        .correct::after {
            content: " ✓";
            color: white;
            font-size: 20px;
            font-weight: bold;
            margin-left: 10px;
        }
        @keyframes blink {
            0% { background: orange; }
            100% { background: green; }
        }
        .timer-container {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: conic-gradient(orange 0deg, black 0deg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
            color: white;
            position: relative;
            margin: 10px auto;
            display: none;
        }
    </style>
</head>
<body>
    <div id="quiz-setup">
        <h2>Quiz Generator</h2>
        <input type="text" id="category-input" placeholder="क्विज़ की श्रेणी (जैसे भारतीय इतिहास)" size="40">
        <input type="text" id="question-input" placeholder="अपना प्रश्न लिखें..." size="40">
        <input type="text" id="exam-year-input" placeholder="परीक्षा और वर्ष (जैसे SSC Mat. 1999,2002)" size="40">
        <div id="option-inputs">
            <input type="text" class="option-text" placeholder="Option A"> <input type="radio" name="correct-option" value="0"><br>
            <input type="text" class="option-text" placeholder="Option B"> <input type="radio" name="correct-option" value="1"><br>
            <input type="text" class="option-text" placeholder="Option C"> <input type="radio" name="correct-option" value="2"><br>
            <input type="text" class="option-text" placeholder="Option D"> <input type="radio" name="correct-option" value="3"><br>
        </div>
        <button onclick="generateQuiz()">Generate Quiz</button>
    </div>
    <button onclick="captureQuizResult()">डाउनलोड रिजल्ट वीडियो</button>

    <div class="quiz-container" id="quiz" style="display:none;">
        <p class="category" id="quiz-category"></p> <!-- कैटेगरी अब सबसे ऊपर होगी -->
        <h2 class="quiz-header">Buddhi Path</h2>
        <div id="question-container">
            <span id="question"></span>
            <span id="exam-year"></span>
        </div>
        <div id="options"></div>
        <div class="timer-container" id="timer">8</div>
    </div>

    <script>
        <script>
function testCapture() {
    html2canvas(document.body).then(canvas => {
        document.body.appendChild(canvas);
    });
}
</script>
    window.onload = function () {
    if (typeof html2canvas !== "undefined") {
        console.log("✅ html2canvas लोड हो गया!");
    } else {
        console.log("❌ html2canvas लोड नहीं हुआ!");
    }

    if (typeof CCapture !== "undefined") {
        console.log("✅ CCapture लोड हो गया!");
    } else {
        console.log("❌ CCapture लोड नहीं हुआ!");
    }
};
<button onclick="testCapture()">टेस्ट स्क्रीनशॉट</button>
        function captureQuizResult() {
    let quizElement = document.body; // पूरी स्क्रीन कैप्चर करने के लिए
    let fps = 30; // वीडियो FPS
    let duration = 15; // 15 सेकंड की वीडियो
    let frames = fps * duration;

    let capturer = new CCapture({ format: "webm", framerate: fps });
    capturer.start();

    let frameCount = 0;
    function captureFrame() {
        if (frameCount < frames) {
            html2canvas(quizElement).then((canvas) => {
                capturer.capture(canvas);
                frameCount++;
                requestAnimationFrame(captureFrame);
            });
        } else {
            capturer.stop();
            capturer.save();
        }
    }

    captureFrame();
        }
        function captureQuizResult() {
    let stream = document.documentElement.captureStream();
    let recorder = new MediaRecorder(stream);
    let chunks = [];

    recorder.ondataavailable = (e) => chunks.push(e.data);
    recorder.onstop = () => {
        let blob = new Blob(chunks, { type: "video/webm" });
        let url = URL.createObjectURL(blob);
        let a = document.createElement("a");
        a.href = url;
        a.download = "quiz_result.webm";
        a.click();
    };

    recorder.start();
    setTimeout(() => recorder.stop(), 15000); // 15 सेकंड की वीडियो रिकॉर्ड होगी
        }
        function captureQuizResult() {
    const quizElement = document.getElementById('quiz'); // पूरा क्विज़ बॉक्स  
    const button = document.querySelector('button'); // बटन हटाने के लिए  

    button.style.display = 'none'; // बटन हटाएं ताकि वीडियो में न दिखे  
   
    html2canvas(quizElement).then(canvas => {
        const imgData = canvas.toDataURL("image/png");

        // वीडियो बनाने के लिए
        const video = document.createElement("video");
        const stream = canvas.captureStream(30); // 30 FPS वीडियो रिकॉर्डिंग
        const recorder = new MediaRecorder(stream);
        let chunks = [];

        recorder.ondataavailable = e => chunks.push(e.data);
        recorder.onstop = () => {
            const blob = new Blob(chunks, { type: "video/mp4" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = "quiz_result.mp4"; // डाउनलोड होने वाली वीडियो का नाम
            a.click();
        };

        recorder.start();
        setTimeout(() => {
            recorder.stop();
            button.style.display = 'block'; // वीडियो के बाद बटन वापस लाओ
        }, 15000); // 15 सेकंड की वीडियो
    });
        }
        async function captureQuizResult() {
    let quizContainer = document.getElementById("quiz"); // क्विज़ का HTML एरिया
    let stream = quizContainer.captureStream(30); // 30 FPS पर रिकॉर्डिंग शुरू
    
    let recorder = new MediaRecorder(stream, { mimeType: "video/webm" });
    let chunks = [];
    
    recorder.ondataavailable = (event) => chunks.push(event.data);
    recorder.onstop = () => {
        let blob = new Blob(chunks, { type: "video/webm" });
        let url = URL.createObjectURL(blob);
        
        let a = document.createElement("a");
        a.href = url;
        a.download = "quiz-result.webm"; // वीडियो फाइल का नाम
        a.click();
    };
    
    recorder.start();
    setTimeout(() => recorder.stop(), 15000); // 15 सेकंड के बाद वीडियो सेव होगा
        }
        let stream = document.documentElement.captureStream();
let recorder = new MediaRecorder(stream);
let chunks = [];

recorder.ondataavailable = event => chunks.push(event.data);
recorder.onstop = () => {
    let blob = new Blob(chunks, { type: 'video/webm' });
    let url = URL.createObjectURL(blob);
    let a = document.createElement('a');
    a.href = url;
    a.download = 'quiz-result.webm';
    document.body.appendChild(a);
    a.click();
    URL.revokeObjectURL(url);
};

function startRecording() {
    chunks = [];
    recorder.start();
    setTimeout(() => recorder.stop(), 15000);
}

// क्विज़ पूरा होते ही रिकॉर्डिंग स्टार्ट करने के लिए
document.getElementById('quiz-container').addEventListener('click', startRecording);
        let mediaRecorder;
let recordedChunks = [];

function startRecording() {
    let quizElement = document.getElementById("quiz"); // रिकॉर्ड होने वाला हिस्सा
    let stream = quizElement.captureStream(60); // 60 FPS पर रिकॉर्डिंग
    
    mediaRecorder = new MediaRecorder(stream, { mimeType: "video/webm" });
    mediaRecorder.ondataavailable = event => recordedChunks.push(event.data);
    
    mediaRecorder.onstop = () => {
        let blob = new Blob(recordedChunks, { type: "video/webm" });
        let link = document.createElement("a");
        link.href = URL.createObjectURL(blob);
        link.download = "quiz-result.webm";
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    };

    mediaRecorder.start();
    setTimeout(() => mediaRecorder.stop(), 15000); // 15 सेकंड बाद स्टॉप
}
        function generateQuiz() {
            let categoryText = document.getElementById('category-input').value;
            let questionText = document.getElementById('question-input').value;
            let examYearText = document.getElementById('exam-year-input').value;
            let options = document.querySelectorAll('.option-text');
            let correctIndex = document.querySelector('input[name="correct-option"]:checked')?.value;
            
            let categoryElement = document.getElementById('quiz-category');
            let questionElement = document.getElementById('question');
            let examYearElement = document.getElementById('exam-year');
            let timerElement = document.getElementById('timer');
            
            categoryElement.innerText = categoryText;
            questionElement.innerText = "";
            examYearElement.innerText = examYearText;
            timerElement.style.display = 'none';
            
            typeText(questionElement, questionText, () => {
                timerElement.style.display = 'flex';
                startTimer(correctIndex);
            });
            
            let optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';
            
            options.forEach((opt, index) => {
                let optionDiv = document.createElement('div');
                optionDiv.classList.add('option');
                optionDiv.innerHTML = `<span>${String.fromCharCode(0x24B6 + index)}</span> ${opt.value}`;
                if (index == correctIndex) optionDiv.setAttribute('data-correct', 'true');
                optionDiv.onclick = function() { checkAnswer(this); };
                optionsContainer.appendChild(optionDiv);
            });
            
            document.getElementById('quiz').style.display = 'block';
            document.getElementById('quiz-setup').style.display = 'none';
        }

        function typeText(element, text, callback, i = 0) {
            if (i < text.length) {
                element.innerHTML += text.charAt(i);
                setTimeout(() => typeText(element, text, callback, i + 1), 100);
            } else {
                callback();
            }
        }

        function startTimer(correctIndex) {
            let timeLeft = 8;
            let timerElement = document.getElementById('timer');
            let timerInterval = setInterval(() => {
                timeLeft--;
                timerElement.innerText = timeLeft;
                timerElement.style.background = `conic-gradient(orange ${timeLeft * 45}deg, black 0deg)`;
                
                if (timeLeft === 0) {
                    clearInterval(timerInterval);
                    showCorrectAnswer();
                }
            }, 1000);
        }

        function showCorrectAnswer() {
            let correctOption = document.querySelector(".option[data-correct='true']");
            if (correctOption) {
                correctOption.classList.add('correct');
            }
        }
    </script>
</body>
</html>
